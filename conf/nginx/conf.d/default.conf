
server {
    listen       80;
    server_name  localhost;

    # root URL location
    location / {
        root /home/ec2-user/public_html;
        index index.html index.htm;
        access_log  /var/log/nginx/access.log  main;
    }

    # redirect server error pages to the static page /40x.html
    error_page  404  /404.html;
    location = /40x.html {
    }

    # redirect server error pages to the static page /50x.html
    error_page  500 502 503 504  /50x.html;
    location = /50x.html {
    }

    # location for static files required for choice app
    location /static/ {
        root /home/ec2-user/public_html/choice;
    }
    
    # choice python app at port 9000
    location /choice/ {
        root /home/ec2-user/public_html/choice;
        include uwsgi_params;
        uwsgi_pass 127.0.0.1:9000;
        access_log  /var/log/nginx/choice_access.log main;
        error_log   /var/log/nginx/choice_error.log; 
    }

    # hello test python app at port 9090
    location /hello/ {
        root /home/ec2-user/public_html/hello;
        include uwsgi_params;
        uwsgi_pass 127.0.0.1:9090;
        # unix sockets are not used.
        #uwsgi_pass hello;
        #uwsgi_pass unix:///var/run/uwsgi/hello.socket;
        #uwsgi_pass unix:/tmp/uwsgi.sock;
        access_log  /var/log/nginx/hello_access.log main;
        error_log   /var/log/nginx/hello_error.log; 
    }
}

